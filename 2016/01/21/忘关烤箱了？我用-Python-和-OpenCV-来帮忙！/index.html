<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 忘关烤箱了？我用 Python 和 OpenCV 来帮忙！ · Something</title><meta name="description" content="“我忘关烤箱了吗？”这个问题常常会在最不方便的时候出现在你的脑子里。有时是当你刚刚走出家门的时候。 有时是当你在上班路上的时候。 有时是当你坐在飞机上准备度个长假的时候……解决这个问题的方法是多种多样的：橡皮筋的方法大声说或唱出来（就像&amp;nbsp;Samuel L. Jackson 一样）当你离开家去度假的时候，给烤箱在内的电器列个清单或做个标记。 或者，我们也许有更好的做法……在本教程中，我们"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.jpg"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><header><a href="/" class="logo-link"><img src="/favicon.jpg"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="https://twitter.com/arm_cc" target="_blank" class="nav-list-link">TWITTER</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">忘关烤箱了？我用 Python 和 OpenCV 来帮忙！</h1><div class="post-meta"><div class="post-time">Jan 21, 2016</div></div><div class="post-content"><p>“我忘关烤箱了吗？”</p><br><p><img alt="" src="http://ww3.sinaimg.cn/mw690/6941baebjw1f02hik54daj206k08pmxh.jpg"></p><br><p>这个问题常常会在最不方便的时候出现在你的脑子里。</p><br><p>有时是当你刚刚走出家门的时候。 有时是当你在上班路上的时候。 有时是当你坐在飞机上准备度个长假的时候……</p><br><p>解决这个问题的方法是多种多样的：</p><br><ol><br><li><a href="http://www.apartmenttherapy.com/did-i-leave-the-oven-on-try-th-131769" target="_blank" rel="external">橡皮筋的方法</a></li><br><li>大声说或唱出来（就像&nbsp;<a href="https://www.youtube.com/watch?v=vPN4XjrwD78" target="_blank" rel="external">Samuel L. Jackson</a> 一样）</li><br><li>当你离开家去度假的时候，给烤箱在内的电器列个清单或做个标记。 或者，我们也许有更好的做法……</li><br></ol><br><p>在本教程中，我们会尝试利用技术手段解决这个问题。</p><br><p><a href="https://github.com/kazuar/opencv_light_detection" target="_blank" rel="external">Github</a>&nbsp;里有完整代码。</p><br><h2><span style="font-family: 'Microsoft YaHei', 宋体, 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size: 24px;font-style: normal;font-weight: normal;line-height: 36px">问题定义</span></h2><br><p><span style="font-weight: normal">对我们而言，我们需要确定一个信号，用于判断烤箱的开关状态。在我的厨房里，这个信号就是顶部标记着“烤箱开”字样的红色灯。</span></p><br><p>当红色灯亮的时候，烤箱是开着的：</p><br><p><img alt="" src="http://ww2.sinaimg.cn/mw690/6941baebgw1f02hlt7x8fj208i0bcjsd.jpg"></p><br><p>当红色灯灭的时候，烤箱是关着的：</p><br><p><img alt="" src="http://ww3.sinaimg.cn/mw690/6941baebjw1f02hilvgtkj208i0bcmy5.jpg"></p><br><h2><span style="font-family: 'Microsoft YaHei', 宋体, 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size: 24px;font-style: normal;font-weight: normal;line-height: 36px">预备条件</span></h2><br><p>确保你的电脑上安装了以下应用：</p><br><ol><br><li>OpenCV 3.0</li><br><li>Python 2.7</li><br><li>Numpy 1.9</li><br></ol><br><h3><span style="font-family: 'Microsoft YaHei', 宋体, 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size: 20px;font-style: normal;font-weight: normal;line-height: 30px">安装 OpenCV3.0 和 Python 2.7</span></h3><br><p>如果你尚未安装 OpenCV，请按照 Adrian Rosebrock 的完美教程，在 OSX 系统上安装 OpenCV 3.0 和 Python 2.7+。我在安装步骤里增加了一些自己的注释，以防你在 OSX 上编译 OpenCV 3.0时遇到问题。</p><br><h2><span style="font-family: 'Microsoft YaHei', 宋体, 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size: 24px;font-style: normal;font-weight: normal;line-height: 36px">步骤</span></h2><br><p>如果你已经成功在你的环境中安装了 OpenCV，我们就可以开始判断烤箱开关的数据分析了。</p><br><h3><span style="font-family: 'Microsoft YaHei', 宋体, 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size: 20px;font-style: normal;font-weight: normal;line-height: 30px">加载需要的包</span></h3><br><ol><br><li>argparse —— 参数处理库。</li><br><li>numpy —— 高度优化的数值运算库。OpenCV 在数组结构中使用 numpy。</li><br><li>cv2 —— OpenCV 中图像处理库。</li><br></ol><br><p></p><!-- Crayon Syntax Highlighter v2.7.1 --><br><br>        <div id="crayon-56a04cc39f841237744620" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" touchscreen minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;"><br><br>            <div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span><br>            <div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div><span class="crayon-language">Python</span></div></div><br>            <div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div><br>            <div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">import argparse<br>import numpy as np<br>import cv2</textarea></div><br>            <div class="crayon-main" style="position: relative; z-index: 1;"><br>                <table class="crayon-table" style=""><br>                    <tbody><tr class="crayon-row"><br>                <td class="crayon-nums " data-settings="show"><br>                    <div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-56a04cc39f841237744620-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-56a04cc39f841237744620-2">2</div><div class="crayon-num" data-line="crayon-56a04cc39f841237744620-3">3</div></div><br>                </td><br>                        <td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-56a04cc39f841237744620-1"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">argparse</span></div><div class="crayon-line crayon-striped-line" id="crayon-56a04cc39f841237744620-2"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">numpy </span><span class="crayon-st">as</span><span class="crayon-h"> </span><span class="crayon-e">np</span></div><div class="crayon-line" id="crayon-56a04cc39f841237744620-3"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span></div></div></td><br>                    </tr><br>                </tbody></table><br>            </div><br>        </div><br><!-- [Format Time: 0.0088 seconds] --><br><p></p><br><h3><span style="font-family: 'Microsoft YaHei', 宋体, 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size: 20px;font-style: normal;font-weight: normal;line-height: 30px">载入图片</span></h3><br><p></p><!-- Crayon Syntax Highlighter v2.7.1 --><br><br>        <div id="crayon-56a04cc39f855379211789" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" touchscreen minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;"><br><br>            <div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span><br>            <div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div><span class="crayon-language">Python</span></div></div><br>            <div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div><br>            <div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">image = cv2.imread(image_path)</textarea></div><br>            <div class="crayon-main" style="position: relative; z-index: 1;"><br>                <table class="crayon-table" style=""><br>                    <tbody><tr class="crayon-row"><br>                <td class="crayon-nums " data-settings="show"><br>                    <div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-56a04cc39f855379211789-1">1</div></div><br>                </td><br>                        <td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-56a04cc39f855379211789-1"><span class="crayon-v">image</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">imread</span><span class="crayon-sy">(</span><span class="crayon-v">image_path</span><span class="crayon-sy">)</span></div></div></td><br>                    </tr><br>                </tbody></table><br>            </div><br>        </div><br><!-- [Format Time: 0.0013 seconds] --><br><p></p><br><h3><span style="font-family: 'Microsoft YaHei', 宋体, 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size: 20px;font-style: normal;font-weight: normal;line-height: 30px">图片降噪</span></h3><br><p>我们为了给图片降噪，需要对输入图片进行平滑处理。这样会更容易在图片中定位目标。使用 medianBlur 函数，把光圈大小定为 3 。数字越大意味着图像会越模糊。</p><!-- Crayon Syntax Highlighter v2.7.1 --><br><br>        <div id="crayon-56a04cc39f85d142186390" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" touchscreen minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;"><br><br>            <div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span><br>            <div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div><span class="crayon-language">Python</span></div></div><br>            <div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div><br>            <div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">blur_image = cv2.medianBlur(image, 3)</textarea></div><br>            <div class="crayon-main" style="position: relative; z-index: 1;"><br>                <table class="crayon-table" style=""><br>                    <tbody><tr class="crayon-row"><br>                <td class="crayon-nums " data-settings="show"><br>                    <div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-56a04cc39f85d142186390-1">1</div></div><br>                </td><br>                        <td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-56a04cc39f85d142186390-1"><span class="crayon-v">blur_image</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">medianBlur</span><span class="crayon-sy">(</span><span class="crayon-v">image</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">3</span><span class="crayon-sy">)</span></div></div></td><br>                    </tr><br>                </tbody></table><br>            </div><br>        </div><br><!-- [Format Time: 0.0015 seconds] --><br><p></p><br><h3><span style="font-family: 'Microsoft YaHei', 宋体, 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size: 20px;font-style: normal;font-weight: normal;line-height: 30px">把图片颜</span>色转为 HSV&nbsp;格式</h3><br><p>HSV —— 色度、饱和度和纯度（亮度）。HSV 可以让我们提取出一个彩色对象，因为它比 BGR 格式（译者注：与我们常说的RBG色彩模型类似，三个字母分别代表红蓝绿三色）更容易表征颜色。</p><br><p>把图片转为 HSV 格式可以让我们通过色度（一个值而不是三个值），来确定图片中的一个颜色。</p><br><p>以下是实现方式：</p><!-- Crayon Syntax Highlighter v2.7.1 --><br><br>        <div id="crayon-56a04cc39f864572895714" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" touchscreen minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;"><br><br>            <div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span><br>            <div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div><span class="crayon-language">Python</span></div></div><br>            <div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div><br>            <div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">hsv_image = cv2.cvtColor(blur_image, cv2.COLOR_BGR2HSV)</textarea></div><br>            <div class="crayon-main" style="position: relative; z-index: 1;"><br>                <table class="crayon-table" style=""><br>                    <tbody><tr class="crayon-row"><br>                <td class="crayon-nums " data-settings="show"><br>                    <div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-56a04cc39f864572895714-1">1</div></div><br>                </td><br>                        <td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-56a04cc39f864572895714-1"><span class="crayon-v">hsv_image</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">cvtColor</span><span class="crayon-sy">(</span><span class="crayon-v">blur_image</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-v">COLOR_BGR2HSV</span><span class="crayon-sy">)</span></div></div></td><br>                    </tr><br>                </tbody></table><br>            </div><br>        </div><br><!-- [Format Time: 0.0015 seconds] --><br><p>执行结果如下图：</p><br><p><img alt="" src="http://ww4.sinaimg.cn/mw690/6941baebjw1f02hikyfi4j209k0crgn0.jpg"></p><br><h3>检测图<span style="font-family: 'Microsoft YaHei', 宋体, 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size: 20px;font-style: normal;font-weight: normal;line-height: 30px">片中的颜色</span></h3><br><p>为了检测我们想要的颜色，我们可以查看烤箱灯图片中颜色的直方图。</p><br><p><img alt="" src="http://ww3.sinaimg.cn/mw690/6941baebgw1f02hk1zbz5j20dl09hq3c.jpg">&nbsp;<img alt="" src="http://ww4.sinaimg.cn/mw690/6941baebjw1f02hilbk3pj205h05i74s.jpg"></p><br><p>我们可以看出，红色在图片中占统治地位。红色有两个高峰 —— 一个幅度高，一个幅度低。这些颜色值转变为色度范围从 0 到10，以及从 160 到 180 （针对红色）。</p><br><p>在 HSV 图片中针对每一个色度范围，我们可以创建一个遮罩，来去掉所有不在选定范围的无关颜色。</p><!-- Crayon Syntax Highlighter v2.7.1 --><br><br>        <div id="crayon-56a04cc39f86b923457064" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" touchscreen minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;"><br><br>            <div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span><br>            <div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div><span class="crayon-language">Python</span></div></div><br>            <div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div><br>            <div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">def create_hue_mask(image, lower_color, upper_color):<br>    lower = np.array(lower_color, np.uint8)<br>    upper = np.array(upper_color, np.uint8)<br><br>    # Create a mask from the colors<br>    mask = cv2.inRange(image, lower, upper)<br>    output_image = cv2.bitwise_and(image, image, mask = mask)<br>    return output_image<br><br># Get lower red hue<br>lower_red_hue = create_hue_mask(hsv_image, [0, 100, 100], [10, 255, 255])<br><br># Get higher red hue<br>higher_red_hue = create_hue_mask(hsv_image, [160, 100, 100], [179, 255, 255])</textarea></div><br>            <div class="crayon-main" style="position: relative; z-index: 1;"><br>                <table class="crayon-table" style=""><br>                    <tbody><tr class="crayon-row"><br>                <td class="crayon-nums " data-settings="show"><br>                    <div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-56a04cc39f86b923457064-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-56a04cc39f86b923457064-2">2</div><div class="crayon-num" data-line="crayon-56a04cc39f86b923457064-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-56a04cc39f86b923457064-4">4</div><div class="crayon-num" data-line="crayon-56a04cc39f86b923457064-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-56a04cc39f86b923457064-6">6</div><div class="crayon-num" data-line="crayon-56a04cc39f86b923457064-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-56a04cc39f86b923457064-8">8</div><div class="crayon-num" data-line="crayon-56a04cc39f86b923457064-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-56a04cc39f86b923457064-10">10</div><div class="crayon-num" data-line="crayon-56a04cc39f86b923457064-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-56a04cc39f86b923457064-12">12</div><div class="crayon-num" data-line="crayon-56a04cc39f86b923457064-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-56a04cc39f86b923457064-14">14</div></div><br>                </td><br>                        <td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-56a04cc39f86b923457064-1"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">create_hue_mask</span><span class="crayon-sy">(</span><span class="crayon-v">image</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">lower_color</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">upper_color</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-56a04cc39f86b923457064-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">lower</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">np</span><span class="crayon-sy">.</span><span class="crayon-k ">array</span><span class="crayon-sy">(</span><span class="crayon-v">lower_color</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">np</span><span class="crayon-sy">.</span><span class="crayon-v">uint8</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-56a04cc39f86b923457064-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">upper</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">np</span><span class="crayon-sy">.</span><span class="crayon-k ">array</span><span class="crayon-sy">(</span><span class="crayon-v">upper_color</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">np</span><span class="crayon-sy">.</span><span class="crayon-v">uint8</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-56a04cc39f86b923457064-4">&nbsp;</div><div class="crayon-line" id="crayon-56a04cc39f86b923457064-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c"># Create a mask from the colors</span></div><div class="crayon-line crayon-striped-line" id="crayon-56a04cc39f86b923457064-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mask</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">inRange</span><span class="crayon-sy">(</span><span class="crayon-v">image</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">lower</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">upper</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-56a04cc39f86b923457064-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">output_image</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">bitwise_and</span><span class="crayon-sy">(</span><span class="crayon-v">image</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">image</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">mask</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">mask</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-56a04cc39f86b923457064-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">output_image</span></div><div class="crayon-line" id="crayon-56a04cc39f86b923457064-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-56a04cc39f86b923457064-10"><span class="crayon-c"># Get lower red hue</span></div><div class="crayon-line" id="crayon-56a04cc39f86b923457064-11"><span class="crayon-v">lower_red_hue</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">create_hue_mask</span><span class="crayon-sy">(</span><span class="crayon-v">hsv_image</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">100</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">100</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-cn">10</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">255</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">255</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-56a04cc39f86b923457064-12">&nbsp;</div><div class="crayon-line" id="crayon-56a04cc39f86b923457064-13"><span class="crayon-c"># Get higher red hue</span></div><div class="crayon-line crayon-striped-line" id="crayon-56a04cc39f86b923457064-14"><span class="crayon-v">higher_red_hue</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">create_hue_mask</span><span class="crayon-sy">(</span><span class="crayon-v">hsv_image</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-cn">160</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">100</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">100</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-cn">179</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">255</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">255</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div></div></td><br>                    </tr><br>                </tbody></table><br>            </div><br>        </div><br><!-- [Format Time: 0.0046 seconds] --><br><p>结果如下：</p><br><p><img alt="" src="http://ww3.sinaimg.cn/mw690/6941baebjw1f02hijyo8lj209k0cr0sn.jpg"><br><br><img alt="" src="http://ww3.sinaimg.cn/mw690/6941baebjw1f02hijjof0j209k0crt8n.jpg"></p><br><p>接下来把这些图片合并在一起，以抓取所有红色色度。</p><!-- Crayon Syntax Highlighter v2.7.1 --><br><br>        <div id="crayon-56a04cc39f872889901749" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" touchscreen minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;"><br><br>            <div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span><br>            <div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div><span class="crayon-language">Python</span></div></div><br>            <div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div><br>            <div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">full_image = cv2.addWeighted(lower_red_hue, 1.0, higher_red_hue, 1.0, 0.0)</textarea></div><br>            <div class="crayon-main" style="position: relative; z-index: 1;"><br>                <table class="crayon-table" style=""><br>                    <tbody><tr class="crayon-row"><br>                <td class="crayon-nums " data-settings="show"><br>                    <div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-56a04cc39f872889901749-1">1</div></div><br>                </td><br>                        <td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-56a04cc39f872889901749-1"><span class="crayon-v">full_image</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">addWeighted</span><span class="crayon-sy">(</span><span class="crayon-v">lower_red_hue</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1.0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">higher_red_hue</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1.0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">0.0</span><span class="crayon-sy">)</span></div></div></td><br>                    </tr><br>                </tbody></table><br>            </div><br>        </div><br><!-- [Format Time: 0.0011 seconds] --><br><p>结果如下：</p><br><p><img alt="" src="http://ww3.sinaimg.cn/mw690/6941baebjw1f02hija3c6j209k0crmx0.jpg"></p><br><h3><span style="font-family: 'Microsoft YaHei', 宋体, 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size: 20px;font-style: normal;font-weight: normal;line-height: 30px">发现图片中的圆圈</span></h3><br><p>现在我们的图片上仅有红色色度，接着我们需要判定红灯是否开启（即是否存在红色色度的那个圆圈）。我们需要在新图中发现圆圈，不过首先需要把图片转换成灰度图（因为 HoughCircles 函数的输入要求是灰度图）。</p><br><p>检测图片中的圆圈需要以下参数（使用 OpenCV中 的 HoughCircles 函数）：</p><br><ol><br><li>灰度图输入。</li><br><li>HOUGH_GRADIENT 是用来检测圆圈的方法（目前仅有的一个方法）。</li><br><li>累加器和图片分辨率的反比。在本例中，为1.2。</li><br><li>待检测圆圈圆心的最小距离，本例中为100。<br><br><!-- Crayon Syntax Highlighter v2.7.1 --><br><br>        <div id="crayon-56a04cc39f879958970608" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" touchscreen minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;"><br><br>            <div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span><br>            <div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div><span class="crayon-language">Python</span></div></div><br>            <div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div><br>            <div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;">#Convert image to grayscale<br>image_gray = cv2.cvtColor(full_image, cv2.COLOR_BGR2GRAY)<br>#Find circles in the image<br><br>circles = cv2.HoughCircles(image_gray, cv2.HOUGH_GRADIENT, 1.2, 100)</textarea></div><br>            <div class="crayon-main" style="position: relative; z-index: 1;"><br>                <table class="crayon-table" style=""><br>                    <tbody><tr class="crayon-row"><br>                <td class="crayon-nums " data-settings="show"><br>                    <div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-56a04cc39f879958970608-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-56a04cc39f879958970608-2">2</div><div class="crayon-num" data-line="crayon-56a04cc39f879958970608-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-56a04cc39f879958970608-4">4</div><div class="crayon-num" data-line="crayon-56a04cc39f879958970608-5">5</div></div><br>                </td><br>                        <td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-56a04cc39f879958970608-1"><span class="crayon-c">#Convert image to grayscale</span></div><div class="crayon-line crayon-striped-line" id="crayon-56a04cc39f879958970608-2"><span class="crayon-v">image_gray</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">cvtColor</span><span class="crayon-sy">(</span><span class="crayon-v">full_image</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-v">COLOR_BGR2GRAY</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-56a04cc39f879958970608-3"><span class="crayon-c">#Find circles in the image</span></div><div class="crayon-line crayon-striped-line" id="crayon-56a04cc39f879958970608-4">&nbsp;</div><div class="crayon-line" id="crayon-56a04cc39f879958970608-5"><span class="crayon-v">circles</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">HoughCircles</span><span class="crayon-sy">(</span><span class="crayon-v">image_gray</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-v">HOUGH_GRADIENT</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1.2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">100</span><span class="crayon-sy">)</span></div></div></td><br>                    </tr><br>                </tbody></table><br>            </div><br>        </div><br><!-- [Format Time: 0.0015 seconds] --><br><br></li><br></ol><br><h2><span style="font-family: 'Microsoft YaHei', 宋体, 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size: 24px;font-style: normal;font-weight: normal;line-height: 36px">结果</span></h2><br><p>此时就可以检查是否有圆圈了。如果有就意味着至少有一个烤箱灯亮着。如果找不到圆圈就意味着没有灯亮，烤箱关着。</p><br><p>为了证明此结论，我们可以用下述代码在原图中画圆圈：</p><!-- Crayon Syntax Highlighter v2.7.1 --><br><br>        <div id="crayon-56a04cc39f880129959472" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" touchscreen minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important; height: auto;"><br><br>            <div class="crayon-toolbar" data-settings=" show" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><span class="crayon-title"></span><br>            <div class="crayon-tools" style="font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div><span class="crayon-language">Python</span></div></div><br>            <div class="crayon-info" style="min-height: 18.2px !important; line-height: 18.2px !important;"></div><br>            <div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" style="tab-size: 4; font-size: 13px !important; line-height: 15px !important; z-index: 0; opacity: 0;"># Draw the circles on the original image<br>circles = np.round(circles[0, :]).astype(“int”)<br>for (center_x, center_y, radius) in circles:<br>    cv2.circle(image, (center_x, center_y), radius, (0, 255, 0), 4)</textarea></div><br>            <div class="crayon-main" style="position: relative; z-index: 1;"><br>                <table class="crayon-table" style=""><br>                    <tbody><tr class="crayon-row"><br>                <td class="crayon-nums " data-settings="show"><br>                    <div class="crayon-nums-content" style="font-size: 13px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-56a04cc39f880129959472-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-56a04cc39f880129959472-2">2</div><div class="crayon-num" data-line="crayon-56a04cc39f880129959472-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-56a04cc39f880129959472-4">4</div></div><br>                </td><br>                        <td class="crayon-code"><div class="crayon-pre" style="font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-56a04cc39f880129959472-1"><span class="crayon-c"># Draw the circles on the original image</span></div><div class="crayon-line crayon-striped-line" id="crayon-56a04cc39f880129959472-2"><span class="crayon-v">circles</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">np</span><span class="crayon-sy">.</span><span class="crayon-k ">round</span><span class="crayon-sy">(</span><span class="crayon-v">circles</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">astype</span><span class="crayon-sy">(</span><span class="crayon-s">“int”</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-56a04cc39f880129959472-3"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">center_x</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">center_y</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">radius</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">circles</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-56a04cc39f880129959472-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">circle</span><span class="crayon-sy">(</span><span class="crayon-v">image</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">center_x</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">center_y</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">radius</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">255</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">4</span><span class="crayon-sy">)</span></div></div></td><br>                    </tr><br>                </tbody></table><br>            </div><br>        </div><br><!-- [Format Time: 0.0042 seconds] --><br><p>结果如下：</p><br><p><img alt="" src="http://ww3.sinaimg.cn/mw690/6941baebgw1f02hlgabuvj209k0crjso.jpg"></p><br><h2><span style="font-family: 'Microsoft YaHei', 宋体, 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size: 24px;font-style: normal;font-weight: normal;line-height: 36px">下一步</span></h2><br><p>接下来还有很多可以做的，比如：</p><br><ol><br><li>检测特定灯的开启，用以了解烤箱的真实状态。</li><br><li>建立一个服务以便远程检查烤箱状态。</li><br><li>把该功能加入树莓派（译者注：基于Linux的迷你开发板），我们就拥有可以警告烤箱关闭与否的小型设备。</li><br></ol><br><p>全部样例代码可以在 <a href="https://github.com/kazuar/opencv_light_detection" target="_blank">Github</a> 中找到。 <em>写于2015年，8月2日</em></p>



<pre><code>&lt;div class=&quot;post-adds&quot;&gt;
    &lt;span data-post-id=&quot;84127&quot; class=&quot; btn-bluet-bigger href-style vote-post-up   register-user-only &quot;&gt;&lt;i class=&quot;fa  fa-thumbs-o-up&quot;&gt;&lt;/i&gt; &lt;h10 id=&quot;84127votetotal&quot;&gt;2&lt;/h10&gt; 赞&lt;/span&gt;
    &lt;span data-book-type=&quot;1&quot; data-site-id=&quot;13&quot; data-item-id=&quot;84127&quot; data-item-type=&quot;1&quot; class=&quot; btn-bluet-bigger href-style bookmark-btn  register-user-only &quot;&gt;&lt;i class=&quot;fa fa-bookmark-o  &quot;&gt;&lt;/i&gt; 5 收藏&lt;/span&gt;

                &lt;a href=&quot;#article-comment&quot;&gt;&lt;span class=&quot;btn-bluet-bigger href-style hide-on-480&quot;&gt;&lt;i class=&quot;fa fa-comments-o&quot;&gt;&lt;/i&gt;  评论&lt;/span&gt;&lt;/a&gt;



    &lt;!-- JiaThis Button BEGIN --&gt;
    &lt;div class=&quot;jiathis_style_24x24&quot; style=&quot;display: inline-flex; position: relative; margin: 0; clear: both;float: right;&quot;&gt;
        &lt;a class=&quot;jiathis_button_tsina&quot; title=&quot;分享到新浪微博&quot;&gt;&lt;span class=&quot;jiathis_txt jtico jtico_tsina&quot;&gt;&lt;/span&gt;&lt;/a&gt;
        &lt;a class=&quot;jiathis_button_weixin&quot; title=&quot;分享到微信&quot;&gt;&lt;span class=&quot;jiathis_txt jtico jtico_weixin&quot;&gt;&lt;/span&gt;&lt;/a&gt;
        &lt;a class=&quot;jiathis_button_qzone&quot; title=&quot;分享到QQ空间&quot;&gt;&lt;span class=&quot;jiathis_txt jtico jtico_qzone&quot;&gt;&lt;/span&gt;&lt;/a&gt;
        &lt;a class=&quot;jiathis_button_fb hide-on-480&quot; title=&quot;分享到Facebook&quot;&gt;&lt;span class=&quot;jiathis_txt jtico jtico_fb&quot;&gt;&lt;/span&gt;&lt;/a&gt;
        &lt;a href=&quot;http://www.jiathis.com/share?uid=1745061&quot; class=&quot;jiathis jiathis_txt jiathis_separator jtico jtico_jiathis&quot; target=&quot;_blank&quot;&gt;&lt;/a&gt;
    &lt;/div&gt;

&lt;/div&gt;




    &lt;!-- BEGIN #author-bio --&gt;
</code></pre><div id="author-bio"><br><br>    <h3 class="widget-title"><br>    关于作者：<a target="_blank" href="http://www.jobbole.com/members/harjoogoo">顾星竹</a><br>    </h3><br>    <div class="alignleft"><br>        <a target="_blank" href="http://www.jobbole.com/members/harjoogoo"><br>            <img src="http://www.jobbole.com/wp-content/uploads/2015/11/d6b70250c4b138a086a36d3db4e39046.jpg"><br>        </a><br>    </div>

<pre><code>&lt;div class=&quot;author-bio-info&quot;&gt;

    &lt;span class=&quot;author-bio-info-block&quot;&gt;
        java程序员，hadoop程序员        &lt;/span&gt;
    &lt;span class=&quot;author-bio-info-block&quot;&gt;
        &lt;a href=&quot;http://www.jobbole.com/members/harjoogoo&quot; target=&quot;_blank&quot;&gt;&lt;i class=&quot;fa fa-user&quot;&gt;&lt;/i&gt; 个人主页&lt;/a&gt; · 
        &lt;a href=&quot;http://python.jobbole.com/author/harjoogoo/&quot; target=&quot;_blank&quot;&gt;&lt;i class=&quot;fa fa-file-text-o&quot;&gt;&lt;/i&gt; 我的文章&lt;/a&gt;

         · &lt;a title=&quot;声望值&quot; target=&quot;_blank&quot; href=&quot;http://www.jobbole.com/members/harjoogoo/reputation/&quot;&gt;&lt;i class=&quot;fa fa-graduation-cap&quot;&gt;&lt;/i&gt; 19&lt;/a&gt;        &lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;
</code></pre><p></p></div><p></p>
<p><a href="http://python.jobbole.com/84127/" target="_blank" rel="external">http://python.jobbole.com/84127/</a></p>
</div></article></div></section><footer><div class="paginator"><a class="prev"> </a><a href="/2016/01/21/Babel下的ES6兼容性与规范/" class="next">下一篇</a></div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "//hm.baidu.com/hm.js?a36e15d9e2adec9a21fcdd9f686b1ed2";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script src="https://cdn.bootcss.com/mathjax/2.5.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>